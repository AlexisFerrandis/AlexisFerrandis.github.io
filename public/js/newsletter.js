window.cfields=[],window._show_thank_you=function(e,r,t,a){var n=document.getElementById("_form_"+e+"_"),o=n.querySelector("._form-thank-you");n.querySelector("._form-content").style.display="none",o.innerHTML=r,o.style.display="block";const i="undefined"==typeof visitorGlobalObjectAlias?"vgo":visitorGlobalObjectAlias;var l=window[i];a&&void 0!==l?(l("setEmail",a),l("update")):void 0!==t&&t&&_load_script(t),void 0!==window._form_callback&&window._form_callback(e)},window._show_error=function(e,r,t){var a=document.getElementById("_form_"+e+"_"),n=document.createElement("div"),o=a.querySelector("button"),i=a.querySelector("._form_error");i&&i.parentNode.removeChild(i),n.innerHTML=r,n.className="_error-inner _form_error _no_arrow";var l=document.createElement("div");if(l.className="_form-inner",l.appendChild(n),o.parentNode.insertBefore(l,o),document.querySelector('[id^="_form"][id$="_submit"]').disabled=!1,t){var s=document.createElement("div");s.className="_error-html",s.innerHTML=t,n.appendChild(s)}},window._load_script=function(e,r){var t=document.querySelector("head"),a=document.createElement("script"),n=!1;a.type="text/javascript",a.charset="utf-8",a.src=e,r&&(a.onload=a.onreadystatechange=function(){n||this.readyState&&"complete"!=this.readyState||(n=!0,r())}),t.appendChild(a)},function(){if(-1!==window.location.search.search("excludeform"))return!1;for(var e=function(e,r,t){if(e.addEventListener)e.addEventListener(r,t);else{var a=e["on"+r];e["on"+r]=function(){a.apply(this,arguments),t.apply(this,arguments)}}},r=document.getElementById("_form_2_"),t=r.querySelectorAll("input, select, textarea"),a=[],n=!1,o=function(e){var r=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(window.location.href);return null!=r&&decodeURIComponent(r[1])},i=0;i<t.length;i++){var l=new RegExp("field\\[(\\d+)\\]").exec(t[i].name);t[i].dataset.name=null!=l?window.cfields[l[1]]:t[i].name;var s=o(t[i].dataset.name);if(s){if("false"===t[i].dataset.autofill)continue;"radio"==t[i].type||"checkbox"==t[i].type?t[i].value==s&&(t[i].checked=!0):t[i].value=s}}var c=function(e,r){var t=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),i={};return"radio"!=e.type&&"checkbox"!=e.type?(t.className="_error",n.className="_error-arrow",o.className="_error-inner",o.innerHTML=r,t.appendChild(n),t.appendChild(o),e.parentNode.appendChild(t)):(t.className="_error-inner _no_arrow",t.innerHTML=r,e.parentNode.insertBefore(t,e),i.no_arrow=!0),i.tip=t,i.elem=e,a.push(i),i},d=function(e){var r=e.elem.getBoundingClientRect(),t=document.documentElement,a=r.top-((window.pageYOffset||t.scrollTop)-(t.clientTop||0));e.tip.className=a<40?e.tip.className.replace(/ ?(_above|_below) ?/g,"")+" _below":e.tip.className.replace(/ ?(_above|_below) ?/g,"")+" _above"},u=function(){for(var e=0;e<a.length;e++)a[e].no_arrow||d(a[e])},m=function(e,t){var n=null,o=e.value,i=!0;if(t&&function(e){for(var r=0;r<a.length;r++)if(a[r].elem===e)return a[r].tip.parentNode.removeChild(a[r].tip),void a.splice(r,1)}(e),"checkbox"!=e.type&&(e.className=e.className.replace(/ ?_has_error ?/g,"")),null!==e.getAttribute("required"))if("radio"==e.type||"checkbox"==e.type&&/any/.test(e.className)){if(!((s=r.elements[e.name])instanceof NodeList||s instanceof HTMLCollection)||s.length<=1)i=e.checked;else{i=!1;for(var l=0;l<s.length;l++)s[l].checked&&(i=!0)}i||(n=c(e,"Veuillez sélectionner une option."))}else if("checkbox"==e.type){var s=r.elements[e.name],u=!1,m=[];i=!0;for(l=0;l<s.length;l++)if(null!==s[l].getAttribute("required")){if(!u&&s[l]!==e)return!0;u=!0,s[l].className=s[l].className.replace(/ ?_has_error ?/g,""),s[l].checked||(i=!1,s[l].className=s[l].className+" _has_error",m.push("Cocher %s est obligatoire".replace("%s",s[l].value)))}i||(n=c(e,m.join("<br/>")))}else if("SELECT"==e.tagName){var f=!0;if(e.multiple){f=!1;for(l=0;l<e.options.length;l++)if(e.options[l].selected){f=!0;break}}else for(l=0;l<e.options.length;l++)e.options[l].selected&&!e.options[l].value&&(f=!1);f||(e.className=e.className+" _has_error",i=!1,n=c(e,"Veuillez sélectionner une option."))}else null!=o&&""!==o||(e.className=e.className+" _has_error",i=!1,n=c(e,"Ce champ est obligatoire."));return i&&"email"==e.name&&(o.match(/^[\+_a-z0-9-'&=]+(\.[\+_a-z0-9-']+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,})$/i)||(e.className=e.className+" _has_error",i=!1,n=c(e,"Saisissez une adresse e-mail valide."))),i&&/date_field/.test(e.className)&&(o.match(/^\d\d\d\d-\d\d-\d\d$/)||(e.className=e.className+" _has_error",i=!1,n=c(e,"Saisissez une date valide."))),n&&d(n),i},f=function(e){return null!==e.getAttribute("required")||"email"===e.name&&""!==e.value},p=function(o){r.querySelector("._form_error");var i=!0;if(!n){n=!0;for(var l=0,s=t.length;l<s;l++){var c=t[l];f(c)&&("text"==c.type?(e(c,"blur",function(){this.value=this.value.trim(),m(this,!0)}),e(c,"input",function(){m(this,!0)})):"radio"==c.type||"checkbox"==c.type?function(t){for(var a=r.elements[t.name],n=0;n<a.length;n++)e(a[n],"click",function(){m(t,!0)})}(c):"SELECT"==c.tagName?e(c,"change",function(){m(this,!0)}):"textarea"==c.type&&e(c,"input",function(){m(this,!0)}))}}!function(){for(var e=0;e<a.length;e++)a[e].tip.parentNode.removeChild(a[e].tip);a=[]}();for(l=0,s=t.length;l<s;l++){var d=t[l];f(d)&&("select"!==d.tagName.toLowerCase()&&(d.value=d.value.trim()),m(d)||(i=!1))}return!i&&o&&o.preventDefault(),u(),i};e(window,"resize",u),e(window,"scroll",u),window._old_serialize=null,"undefined"!=typeof serialize&&(window._old_serialize=window.serialize),_load_script("//d3rxaij56vjege.cloudfront.net/form-serialize/0.3/serialize.min.js",function(){window._form_serialize=window.serialize,window._old_serialize&&(window.serialize=window._old_serialize)});e(r,"submit",function(e){if(e.preventDefault(),p()){document.querySelector("#_form_2_submit").disabled=!0;var t=_form_serialize(document.getElementById("_form_2_")).replace(/%0A/g,"\\n"),a=r.querySelector("._form_error");a&&a.parentNode.removeChild(a),_load_script("https://lerepairedebacchus.activehosted.com/proc.php?"+t+"&jsonp=true")}return!1})}();